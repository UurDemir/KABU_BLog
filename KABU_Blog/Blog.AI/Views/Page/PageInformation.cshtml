@using Blog.Resources
@model Blog.AI.Models.TableViewModel<Blog.Models.Page>
    <form id="table">
        @Html.HiddenFor(x => x.CurrentPage)
        
            <div class="box-content" id="tableContent">
                <div class="row-fluid">
                    <div class="control-group span6">
                        <label class="control-label" for="@Html.NameFor(x => x.Perpage)">Gösterilecek sayı</label>
                        <div class="controls">
                            @Html.DropDownListFor(x => x.Perpage, new List<SelectListItem>
                        {
                            new SelectListItem
                            {
                                Value = "10",
                                Text = "10"
                            },
                            new SelectListItem
                            {
                                Value = "25",
                                Text = "25"
                            },
                            new SelectListItem
                            {
                                Value = "50",
                                Text = "50"
                            },
                            new SelectListItem
                            {
                                Value = "100",
                                Text = "100"
                            },
                            new SelectListItem
                            {
                                Value = "250",
                                Text = "250"
                            },
                            new SelectListItem
                            {
                                Value = "500",
                                Text = "500"
                            },
                            new SelectListItem
                            {
                                Value = "1000",
                                Text = "1000"
                            }

                        })
                        </div>
                    </div>
                </div>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Başlık</th>
                            <th>İçerik</th>
                            <th>Yazar</th>
                            <th>Yazılma Tarihi</th>
                            <th>Durum</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var page in Model.Hits)
                        {
                            <tr>
                                <td>@page.Id</td>
                                <td class="center">@page.Title</td>
                                <td class="center">@page.Content.Substring(1,100)</td>
                                <td class="center">@page.CreatedBy</td>
                                <td class="center">@page.Created.ToShortDateString()</td>
                                <td class="center">@page.Status</td>
                                <td class="center">
                                    <a class="btn btn-info" href="@Url.Action("EditPage", new { id = page.Id })">
                                        <i class="halflings-icon white edit"></i>
                                    </a>
                                    <a class="btn btn-danger" href="#">
                                        <i class="halflings-icon white trash"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
                <div class="pagination pagination-centered">
                    <ul>
                        <li class="prev @(Model.CurrentPage == 1 ? "disabled" : "") "><a href="javascript:void(0)" onclick="changePage(@(Model.CurrentPage == 1 ? -1 : Model.CurrentPage - 1))">Önceki</a></li>
                        @for (int i = 1; i <= Model.PageCount; i++)
                        {
                            <li @(Model.CurrentPage == i ? "class='active disabled'" : "")><a href="javascript:void(0)" onclick="changePage(@i)">@i</a></li>
                        }
                        <li class="next @(Model.CurrentPage == Model.PageCount ? "disabled" : "")"><a href="javascript:void(0)" onclick="changePage(@(Model.CurrentPage == Model.PageCount ? -1 : Model.CurrentPage + 1))">Sonraki</a></li>
                    </ul>
                </div>
            </div>
    </form>
    <script>
    $(document).ready(
        function () {
            $("#@Html.IdFor(x=> x.Perpage)").change(function () {
                changePage(1);
            });
            @*//$('#@Html.IdFor(x => x.Search)').change(function () {

                changePage(1);
            });*@
        }
        );
    </script>
